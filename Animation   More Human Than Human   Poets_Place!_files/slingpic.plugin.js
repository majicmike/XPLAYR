var slingpic_uid='2sdw00hzk5';
// Generated by CoffeeScript 1.6.1
(function(){var a,b,c;b=typeof exports!="undefined"&&exports!==null?exports:this,a=jQuery,c=slingpic_uid,a.fn.extend({slingPic:function(d){var e,f,g,h,i,j,k,l,m,n,o,p,q=this;return j=function(a){if(l.debug)return typeof console!="undefined"&&console!==null?console.log(a):void 0},k={generateShareLink:function(a,b,c,d,e){var f,g,h;f=c?' class="first-child"':"",f=d&&f===""?' class="last-child"':f;switch(a){case"facebook":g+="onclick=\"window.open(this.href,'sharer','toolbar=0,status=0,width=670,height=350'); return false;\"";break;case"twitter":g+="onclick=\"window.open(this.href,'sharer','toolbar=0,status=0,width=626,height=252'); return false;\"";break;case"tumblr":g+="onclick=\"window.open(this.href,'sharer','toolbar=0,status=0,width=450,height=450'); return false;\"";break;case"googleplus":g+="onclick=\"window.open(this.href,'sharer','toolbar=0,status=0,width=450,height=450'); return false;\"";break;case"print":g+="onclick=\"var printme = window.open(this.href,'image'); return false;\"";break;default:g=""}return h="<li "+f+'>\n	<a data-social-network="'+a+'" class="slingpicSocialBtn slingpicShare-'+a+' external" href="'+b+'" target="_blank" '+g+' rel="nofollow"></a>\n</li>',h},generateShareLinks:function(b,c,d){var e;return e="",a.each(c,function(a,f){var g,h,i;if(a>d-1)return;switch(a){case 0:h=!0;break;case c.length-1:i=!0;break;case d-1:i=!0;break;default:h=i=!1}if(!n[f]||!n[f][0])return;return g=n[f][0].replace("{url}",encodeURIComponent(b.url)+k.appendHash(b,f)).replace("{image-url}",encodeURIComponent(b.imgSrc)).replace("{original-image-url}",b.imgSrc).replace("{title}",b.title).replace("{summary}",encodeURIComponent(b.shareSummary)),e+=k.generateShareLink(f,g,h,i,b)}),e},appendHash:function(a,b){return"%23"+a.uid+"."+a.imgHash+"."+o[b]},hashChar:function(a,b,c){return c=(c<<5)-c+a.charCodeAt(b),c&c},createImgHash:function(a){var b,c,d,e;if(!a)return"";c=0;if(a.length===0)return c;for(d=0,e=a.length;d<e;d++)b=a[d],c=k.hashChar(a,b,c);return c=Math.abs(c)+"",c.substring(0,5)},loadCss:function(){if(a("#slingpicCssInclude").size()===0)return a("<link id='slingpicCssInclude'>").appendTo("head").attr({rel:"stylesheet",type:"text/css",href:"http://cdn.slingpic.com/css/slingpicv2.css?v=22"})},adReload:function(){var b,c;b=parseInt(Math.random()*999999,10),c=!1,a(".slingPic_advert").size()>0&&(c=a(".slingPic_advert").attr("src"));if(!c)return;c=c.split("?cb=")[0],a(".slingPic_advert").attr("src",""+c+"?cb="+b);if(g<l.adReloadNumber)return g++,document.slingpicReloader=setTimeout(k.adReload,2e4)},getContext:function(b,c,d){var e;return c||(c=0),c!==1&&a(b).closest(".slingpic").parent().find("caption:first").size()>0?(e=a(b).closest(".slingpic").parent().find("caption:first").text(),c=1):c!==2&&a(b).closest(".slingpic").parent().find(":header:first").size()>0?(e=a(b).closest(".slingpic").parent().find(":header:first").text(),c=2):c!==3&&a(b).closest(".slingpic").parent().siblings(":header:first").size()>0?(e=a(b).closest(".slingpic").parent().siblings(":header:first").text(),c=3):c!==4&&a(b).attr("alt")!==""?(e=a(b).attr("alt"),c=4):e=document.title,d?{value:encodeURIComponent(e),avoid:c}:{value:e,avoid:c}},checkConflicts:function(a,b){return a.closest(".slingpic").size()>0?!1:a.closest(".nivoSlider").size()>0||a.closest(".post-gallery").size()>0||a.closest(".carousel:not(.flexslider)").size()>0?(j("conflict"),!1):(a.parent().is("a")&&(a.siblings().size()>0||a.contents().filter(function(){return this.nodeType===3}))&&(j("image styling"),b.allowImageStyling=!0),a.closest(".flexslider").size()>0&&(j("ignore width and height"),b.ignoreWidthHeight=!0),!0)},setStyle:function(b,c,d){var e;return e="",a.each(h[c],function(a,c){var f,g,h,i,j,k,m,n;if(a==="position"&&b.css(c)==="static")k="relative";else if(a==="display"&&b.css(c)==="inline")k="inline-block";else{if(a==="display"&&b.css(c)==="none")return;a==="width"?(j=parseInt(b.css("paddingLeft"),10)+parseInt(b.css("paddingRight"),10),g=parseInt(b.css("border-left-width"),10)+parseInt(b.css("border-right-width"),10),n=l.trueWidth+j+g,k=""+n+"px"):a==="height"?(i=parseInt(b.css("paddingTop"),10)+parseInt(b.css("paddingBottom"),10),f=parseInt(b.css("border-top-width"),10)+parseInt(b.css("border-bottom-width"),10),m=l.trueHeight+i+f,k=""+m+"px"):k=b.css(c)}return h=d?" !important":"",e+=""+a+":"+k+h+";"}),e},updateUrlWithHash:function(a){if(a.urlFriendly)return location.hash=a.uid},attemptToScrollToImage:function(b){var c,d;if(location.hash==="")return;if(b.noScroll)return;return c=location.hash,d=c.split("."),a("img").each(function(){if(d[1]===k.createImgHash(a(this).attr("src")))return a("html, body").animate({scrollTop:a(this).offset().top},1e3),!1})},captureReferrer:function(b){return a.ajax({crossDomain:!0,type:"GET",url:"http://cdn.slingpic.com/api/log",dataType:"jsonp",data:{uid:b.uid,source:"SLINGPIC",urlOn:document.location.hostname,urlFrom:document.referrer},success:function(a){return j(a)}})},updateShareCount:function(b,c){return a(b).find(".slingpicShareCount").html(c)},slideInOutShares:function(b){var c;return c=a(b).find(".slingpicShareCount"),a(b).hasClass("right")?(c.stop().clearQueue().css("right",c.data("base-state")+"px"),c.delay(500).animate({right:"+=30"},500).delay(3e3).animate({right:"-=30"},500)):(c.stop().clearQueue().css("left",c.data("base-state")+"px"),c.delay(500).animate({left:"+=30"},500).delay(3e3).animate({left:"-=30"},500))},getShareCounts:function(){var b;b=[],a(".slingpic").each(function(){return b.push(a(this).data("img-hash"))});if(b.length===0)return;return a.ajax({crossDomain:!0,type:"GET",url:"http://cdn.slingpic.com/api/count/get",dataType:"jsonp",data:{hostname:document.location.hostname,imgHashes:b},jsonpCallback:"getShareCountsResponse"})}},h={general:{bottom:"bottom",display:"display","float":"float",left:"left","margin-top":"marginTop","margin-right":"marginRight","margin-bottom":"marginBottom","margin-left":"marginLeft","max-width":"maxWidth",position:"position",right:"right",top:"top"},extra:{background:"background",border:"border","border-radius":"borderRadius","box-shadow":"boxShadow","padding-bottom":"paddingBottom","padding-left":"paddingLeft","padding-right":"paddingRight","padding-top":"paddingTop"},heightWidth:{height:"height",width:"width"}},g=0,i={adPos:"bottomRight",adPosManual:{bottom:0,left:0,right:0,top:0},adReload:!1,adReloadNumber:2,advertHeight:200,advertSrc:!1,advertWidth:200,alignShare:"right",allowImageStyling:!1,autoShowShare:!1,context:!1,copyright:!1,debug:!1,domain:location.host,dontShow:"",elemPadding:"",ignoreWidthHeight:!1,manualDimensions:{height:0,width:0},minShareHeight:100,minShareWidth:100,minAdHeight:200,minAdWidth:200,noScroll:!1,offsets:{top:0,right:0,bottom:0,left:0},parentElem:"",persistantAd:!0,primary_links:["facebook","twitter","pinterest","email"],secondary_links:["delicious","linkedin","reddit","friendfeed","digg","tumblr","myspace","print"],shareSummary:"",show:"",showAd:!1,showAdClose:!0,showShare:!0,theme:"",title:"",uid:c,url:location.href,urlFriendly:!1},n={facebook:["http://www.facebook.com/share.php?s=100&amp;p[title]={title}&amp;p[summary]={summary}&amp;p[url]={url}&amp;&amp;p[images][0]={image-url}","Share this on Facebook"],twitter:['http://twitter.com/share?url={url}&text={summary}&count=horiztonal"',"Tweet This!"],tumblr:["http://www.tumblr.com/share/photo?source={image-url}&caption={summary}&click_thru={url}","Share this on Tumblr"],email:["mailto:?subject={summary}&body={image-url} from {url}","Email this to a friend?"],print:["{image-url}","Print"],linkedin:["http://www.linkedin.com/shareArticle?mini=true&url={url}&title={title} {image-url}&summary={summary}&source={url}","Share this on LinkedIn"],reddit:["http://reddit.com/submit?url={url}&title={summary} {image-url} {title}","Share this on Reddit"],stumbleupon:["http://www.stumbleupon.com/submit?url={url}&title={summary} {image-url}","Stumble upon something good? Share it on StumbleUpon"],delicious:["http://delicious.com/post?url={url}&title={summary} {image-url}","Share this on del.icio.us"],pinterest:["http://pinterest.com/pin/create/button/?url={url}&media={image-url}&description={summary}","Pin it"],digg:["http://digg.com/submit?phase=2&url={url}&title={title}&bodytext={summary}","Digg this!"],myspace:["http://www.myspace.com/Modules/PostTo/Pages/?u={url}&t={summary}&c={image-url}&l={image-url}","Post this to MySpace"],blogger:["http://www.blogger.com/blog_this.pyra?t&amp;u={url}&n={title}","Blog this on Blogger"],friendfeed:["http://www.friendfeed.com/share?title={summary} {image-url}&link={url}&image0_url={image-url}","Share this on FriendFeed"],designfloat:["http://www.designfloat.com/submit.php?url={url}&link={title}","Submit this to DesignFloat"],orkut:["http://promote.orkut.com/preview?nt=orkut.com&amp&tt={url};du={title}","Promote this on Orkut"],technorati:["http://technorati.com/faves?add={url}","Share this on Technorati"]},o={facebook:"fa",twitter:"tw",tumblr:"tu",email:"em",print:"pr",googleplus:"gp",linkedin:"li",reddit:"re",stumbleupon:"su",posterous:"po",delicious:"de",pinterest:"pi",digg:"di",gmail:"gm",netvibes:"nv",myspace:"ms",blogger:"bl",friendfeed:"ff",yahoomail:"ym",designfloat:"df",evernote:"en",orkut:"or",virb:"vi",technorati:"te"},l=a.extend(i,d),p=1,e=4,f=8,k.attemptToScrollToImage(l),k.updateUrlWithHash(l),k.captureReferrer(l),j("looping through images"),m=this.each(function(b,d){var g,h,i,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;j("image "+b),z=a(d),O=!1,o=!1,B=0,A=0,y=!1;if(!k.checkConflicts(z,l))return;j("passed conflicts");if(l.show!==""&&z.hasClass(l.show)||l.show===""&&l.dontShow===""||l.show===""&&l.dontShow!==""&&!z.hasClass(l.dontShow)){j("show");if(z.css("width")==="100%"){y=z.parent();while(y.css("width")==="100%")y=y.parent();B=y.width()}else z[0]?B=z.width()<z[0].width?z[0].width:z.width():B=z.width();if(z.css("height")==="100%"||z.css("height")==="0px"&&B>0){y=z.parent();while(y.css("height")==="100%"||y.css("height")==="0px")y=y.parent();A=y.height()}else z[0]?A=z.height()<z[0].height?z[0].height:z.height():A=z.height();B>l.minShareWidth&&A>l.minShareHeight&&l.showShare&&(O=!0),B>l.minAdWidth&&A>l.minAdHeight&&l.showAd&&l.advertSrc&&(o=!0),l.trueHeight=l.manualDimensions.height>0?l.manualDimensions.height:A,l.trueWidth=l.manualDimensions.width>0?l.manualDimensions.width:B;if(!O&&!o)return}else{if(l.dontShow!==""&&z.hasClass(l.dontShow)){j("don't show: return");return}if(!z.hasClass(l.show))return}return l.parentElem!==""?i=a(l.parentElem):i=a(d),m=i.attr("src"),v=i.data("copyright"),g=z.parent().css("position"),h=z.parent().css("zIndex"),l.originalImgSrc=i.attr("src"),k.checkConflicts(i,l),m.indexOf("http://")===-1&&m.indexOf("https://")===-1&&(m.indexOf("/")===0?m="http://"+l.domain+m:(I=null,q=l.url,H=/(\/\w+\.\w+)$/i,I=H.exec(l.url),I&&(q=l.url.substr(0,I.index)),m=""+q+"/"+m,j(m))),l.imgSrc=m,S=k.setStyle(i,"general"),S+=k.setStyle(i,"heightWidth"),T=p++,l.imgHash=k.createImgHash(l.originalImgSrc),R='<div class="slingpic '+l.theme+" "+l.alignShare+'" data-img-hash="'+l.imgHash+'" style="'+S+'">',l.parentElem!==""?z.closest(l.parentElem).wrap(R):z.parent().is("a")?z.parent().wrap(R):z.wrap(R),l.context?(J=k.getContext(i),l.shareSummary=J.value,l.copyright&&v&&(l.shareSummary+=" \n© "+v+"\n"),J=k.getContext(i,J.avoid,!0),l.title=J.value):(l.shareSummary=""+document.title+" (shared via SlingPic)",l.copyright&&v&&(l.shareSummary+=" \n© "+v+"\n"),l.title=encodeURIComponent(document.title)),l.offsets={top:parseInt(i.css("paddingTop"),10)+parseInt(i.css("border-top-width"),10),right:parseInt(i.css("paddingRight"),10)+parseInt(i.css("border-right-width"),10),bottom:parseInt(i.css("paddingBottom"),10)+parseInt(i.css("border-bottom-width"),10),left:parseInt(i.css("paddingLeft"),10)+parseInt(i.css("border-left-width"),10)},l.showShare&&(l.alignShare==="left"?(D="left: "+(l.offsets.left+5)+"px !important;",x=l.offsets.left+33,w="left: "+x+"px;"):l.alignShare==="right"&&(D="right: "+(l.offsets.right+5)+"px !important;",x=l.offsets.right+33,w="right: "+x+"px;"),P="top: "+(l.offsets.top+5)+"px !important;",Q="top: "+(l.offsets.top+40)+"px !important;",G=k.generateShareLinks(l,l.primary_links,e),l.secondary_links.length>0?(N=k.generateShareLinks(l,l.secondary_links,f),M='<ul class="slingpicMoreSocialBtnContainer" style="display: none !important">\n	'+N+"\n</ul>",E='<a href="#" class="slingpicWidgetMoreLessBtn">more</a>'):(M="",E=""),C='<div class="slingpicShareCount" data-base-state="'+x+'" style="display: none !important;'+w+P+'">0</div>\n<div class="slingpicShareBtn" style="display: none !important;'+D+P+'"></div>\n<div class="slingpicWidgetContainer" style="display: none !important;'+D+Q+'">\n	<div class="slingpicArrow"></div>\n	<div class="slingpicHeader"><a class="slingpicWidgetClose"></a>Share this image</div>\n	<ul class="slingpicSocialBtnContainer">\n		'+G+"\n	</ul>\n	"+M+'\n	<div class="slingpicFooter">\n		'+E+'\n		<a class="slingpicWidgetSlingpicLink" href="http://slingpic.com" target="_blank">Slingpic</a>\n		<span class="slingpicWidgetSlingpicText"><img src="http://go.affec.tv/i/4eef53b4d52bc56cf4000063" width="1" height="1" alt="">Powered by </span>\n	</div>\n</div>'),l.showAd&&(F=l.showShare?"":'<img src="http://go.affec.tv/i/4eef53b4d52bc56cf4000063" width="1" height="1">',t=parseInt(Math.random()*999999),u=l.showAdClose===!0?'<div class="slingpicAdClose" onclick="jQuery(this).closest(\'.slingpicAdSpot\').remove(); return false;"></div>':"",s=l.offsets.bottom+l.adPosManual.bottom,L=l.offsets.right+l.adPosManual.right,r="bottom: "+s+"px !important;",K="right: "+L+"px !important;",l.persistantAd?n='<div class="slingpicAdSpot slingpic-'+l.adPos+'" style="display: block !important; height: '+l.advertHeight+"px; width: "+l.advertWidth+"px; "+K+" "+r+'">\n	'+F+'\n	<iframe class="slingPic_advert" height="'+l.advertHeight+'" width="'+l.advertWidth+'" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" wmode="transparent" onload="this.style.visibility = \'visible\';" src="'+l.advertSrc+"?cb="+t+'"></iframe>\n	'+u+"\n</div>":z.closest(".slingpic").one("mouseover",l,function(b){return F=b.data.showShare?"":'<img src="http://go.affec.tv/i/4eef53b4d52bc56cf4000063" width="1" height="1">',t=parseInt(Math.random()*999999),u=b.data.showAdClose===!0?'<div class="slingpicAdClose" onclick="jQuery(this).closest(\'.slingpicAdSpot\').remove(); return false;"></div>':"",n='<div class="slingpicAdSpot slingpic-'+b.data.adPos+'" style="height:'+b.data.advertHeight+"px; width:"+b.data.advertWidth+"px; "+K+" "+r+'">\n	'+F+'\n	<iframe class="slingPic_advert" height="'+b.data.advertHeight+'" width="'+b.data.advertWidth+'" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" wmode="transparent" onload="this.style.visibility = \'visible\';" src="'+b.data.advertSrc+"?cb="+t+'"></iframe>\n	'+u+"\n</div>",a(this).append(n)})),n&&C?C+=n:n&&(C=n),a(C).appendTo(z.closest(".slingpic")),i.addClass("slingpic_reset"),l.showShare&&(z.closest(".slingpic").find(".slingpicSocialBtn").click(function(b){var d;return d={hn:document.location.hostname,imgHash:a(this).closest(".slingpic").data("img-hash"),sn:a(this).data("social-network"),uid:c},a.ajax({crossDomain:!0,type:"GET",url:"http://cdn.slingpic.com/api/count/add",dataType:"jsonp",data:d,success:function(a){return a.success?j("success"):j("failed")}})}),z.closest(".slingpic").find(".slingpicWidgetMoreLessBtn,.slingpicShareBtn,.slingpicWidgetClose").click(function(b){var c,d,e,f;b.preventDefault();if(a(this).hasClass("slingpicWidgetMoreLessBtn"))return c=a(this).parent().siblings(".slingpicMoreSocialBtnContainer"),c.css("display")==="none"?(a(this).text("less"),c.attr("style",c.attr("style").replace("none","block"))):(a(this).text("more"),c.attr("style",c.attr("style").replace("block","none")));if(a(this).hasClass("slingpicShareBtn"))return f=a(this).closest(".slingpic").find(".slingpicWidgetContainer"),f.css("display")==="none"?(f.attr("style",f.attr("style").replace("none","block")),e=a(this).prev(".slingpicShareCount"),e.clearQueue(),d=e.data("base-state")+30,a(this).closest(".slingpic").hasClass("right")?e.animate({right:""+d+"px"},500):e.animate({left:""+d+"px"},500)):f.attr("style",f.attr("style").replace("block","none"));if(a(this).hasClass("slingpicWidgetClose"))return f=a(this).closest(".slingpicWidgetContainer"),f.css("display")==="none"?f.attr("style",f.attr("style").replace("none","block")):f.attr("style",f.attr("style").replace("block","none"))}),z.closest(".slingpic").mouseenter({autoShowShare:l.autoShowShare,alignShare:l.alignShare},function(b){var c,d,e;d=a(this).find(".slingpicShareCount"),c=a(this).find(".slingpicShareBtn"),c.size()>0&&c.attr("style",c.attr("style").replace("none","block")),d.size()>0&&(d.attr("style",d.attr("style").replace("none","block")),b.data.alignShare==="right"?(j("it's aligned to the right"),d.stop().clearQueue().css("right",d.data("base-state")+"px"),d.delay(500).animate({right:"+=30"},500).delay(3e3).animate({right:"-=30"},500)):(d.stop().clearQueue().css("left",d.data("base-state")+"px"),d.delay(500).animate({left:"+=30"},500).delay(3e3).animate({left:"-=30"},500)));if(b.data.autoShowShare){e=a(this).find(".slingpicWidgetContainer");if(e.size()>0)return e.attr("style",e.attr("style").replace("none","block"))}})),l.showAd&&a(document).delegate('div[id^="scr_"]',"mouseenter",function(a){if(document.slingpicReloader)return window.clearTimeout(document.slingpicReloader)}),l.persistantAd||(z.closest(".slingpic").mouseenter(function(b){return a(this).find(".slingpicAdSpot").attr("style","display: block !important")}),z.closest(".slingpic").mouseleave(function(b){return a(this).find(".slingpicAdSpot").attr("style",a(this).find(".slingpicAdSpot").attr("style").replace("block","none"))})),z.closest(".slingpic").mouseleave({alignShare:l.alignShare},function(b){var c,d;a(this).find(".slingpicWidgetContainer").size()>0&&a(this).find(".slingpicWidgetContainer").attr("style",a(this).find(".slingpicWidgetContainer").attr("style").replace("block","none")),a(this).find(".slingpicWidgetMoreLessBtn").size()>0&&a(this).find(".slingpicWidgetMoreLessBtn").text("more"),a(this).find(".slingpicMoreSocialBtnContainer").size()>0&&a(this).find(".slingpicMoreSocialBtnContainer").attr("style",a(this).find(".slingpicMoreSocialBtnContainer").attr("style").replace("block","none")),c=a(this).find(".slingpicShareBtn"),c.size()>0&&c.attr("style",c.attr("style").replace("block","none")),d=a(this).find(".slingpicShareCount");if(d.size()>0)return d.attr("style",d.attr("style").replace("block","none")),b.data.alignShare==="right"?d.stop().clearQueue().css("right",d.data("base-state")+"px"):d.stop().clearQueue().css("left",d.data("base-state")+"px")}),k.loadCss()}),k.getShareCounts(),document.slingpicReloader=l.showAd&&l.advertSrc&&l.adReload?setTimeout(k.adReload,2e4):!1,b.getShareCountsResponse=function(b){var c;return c={},a.each(b.counts,function(a,b){return c[b.img_hash]=b.count}),a(".slingpic").each(function(){if(c.hasOwnProperty(a(this).data("img-hash")))return k.updateShareCount(a(this),c[a(this).data("img-hash")])})},b.addShareCountResponse=function(b){return a(".slingpic").each(function(){if(parseInt(b.imgHash,10)===parseInt(a(this).data("img-hash"),10))return k.updateShareCount(a(this),parseInt(a(this).find(".slingpicShareCount").html(),10)+1)})},m}})}).call(this);